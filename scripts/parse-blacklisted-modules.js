#!/usr/bin/env node

const fs = require('fs')
const network = process.argv[2]
const blacklistedModules = require('../blacklisted-modules')[network]

console.log(`Blacklisting modules: ${blacklistedModules}`)
const outputPath = `${process.cwd()}/helpers/blacklisted-modules.ts`
if (fs.existsSync(outputPath)) fs.unlinkSync(outputPath)

const header = `// This file was autogenerated at deployment time picking the list of blacklisted modules defined in "blacklisted-modules.js" for network ${network}`
const modulesExport = `export const BLACKLISTED_MODULES: string[] = [${blacklistedModules.map(x => `"${x}"`).join(', ')}]`
fs.writeFileSync(outputPath, `${header}\n\n${modulesExport}\n`)
